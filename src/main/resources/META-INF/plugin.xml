<idea-plugin>
    <id>com.devtoolkit.pro</id>
    <name>Dev Toolkit Pro</name>
    <vendor email="maoba@anybots.cloud" url="https://anybots.cloud">anybots.cloud</vendor>

    <!-- Plugin icon for plugin manager -->
    <icon>/icons/pluginIcon.svg</icon>

    <description><![CDATA[
    IntelliJ IDEA/PyCharm plugin for RESTful API search and Git link copying.

    Features:
    - RESTful API fuzzy search (Spring Boot, FastAPI, JAX-RS)
    - Git link copying from editor
    - Compatible with IntelliJ IDEA 2023.2+ and PyCharm 2023.2+
    ]]></description>

    <change-notes><![CDATA[
    <h3>Version 0.0.1</h3>
    <ul>
        <li>Initial release</li>
        <li>RESTful API fuzzy search</li>
        <li>Git link copying from editor</li>
        <li>Support for Spring Boot, FastAPI, JAX-RS</li>
    </ul>
    ]]></change-notes>

    <!-- Product and plugin compatibility requirements -->
    <depends>com.intellij.modules.platform</depends>
    <depends optional="true" config-file="java-features.xml">com.intellij.modules.java</depends>
    <depends optional="true">com.intellij.modules.python</depends>
    <depends optional="true">org.jetbrains.kotlin</depends>
    <depends>Git4Idea</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- RESTful Endpoints Contributor for Choose by Name dialog -->
        <chooseByNameContributor implementation="com.devtoolkit.pro.contributors.RestfulEndpointChooseByNameContributor"/>

        <!-- RESTful Endpoints Contributor for Search Everywhere dialog -->
        <searchEverywhereContributor id="DevToolkitPro.RestfulEndpoints" implementation="com.devtoolkit.pro.contributors.RestfulEndpointSearchEverywhereContributor$Factory"/>

        <!-- RESTful Endpoints Contributor for Symbols tab -->
        <gotoSymbolContributor implementation="com.devtoolkit.pro.contributors.RestfulEndpointSymbolContributor"/>

        <!-- Inlay Hints Provider for RESTful URL copying - using traditional approach -->
        <codeInsight.inlayProvider language="JAVA" implementationClass="com.devtoolkit.pro.inlay.RestfulUrlInlayHintsProvider"/>
        <codeInsight.inlayProvider language="kotlin" implementationClass="com.devtoolkit.pro.inlay.RestfulUrlInlayHintsProvider"/>

        <!-- Line Marker Provider for RESTful URL copying with Gutter Icons -->
        <codeInsight.lineMarkerProvider language="JAVA" implementationClass="com.devtoolkit.pro.inlay.RestfulUrlLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="kotlin" implementationClass="com.devtoolkit.pro.inlay.RestfulUrlLineMarkerProvider"/>

        <!-- Inlay Action Handler for URL copying -->
        <codeInsight.inlayActionHandler id="copy.url.action" implementationClass="com.devtoolkit.pro.inlay.CopyUrlActionHandler"/>

        <!-- Notification Group for RestfulTool -->
        <notificationGroup id="RestfulTool" displayType="BALLOON" key="notification.group.restfultool"/>
    </extensions>

    <actions>
        <!-- Global RESTful URL Search Action -->
        <action id="DevToolkitPro.SearchRestfulUrls"
                class="com.devtoolkit.pro.actions.SearchRestfulUrlsAction"
                text="Search RESTful URLs"
                description="Global fuzzy search for RESTful URLs">
            <keyboard-shortcut keymap="$default" first-keystroke="control shift R"/>
            <keyboard-shortcut keymap="Mac OS X" first-keystroke="meta shift R"/>
            <keyboard-shortcut keymap="Mac OS X 10.5+" first-keystroke="meta shift R"/>
        </action>

        <!-- Direct Search Everywhere Action for Restful Endpoints -->
        <action id="DevToolkitPro.SearchRestfulEndpointsEverywhere"
                class="com.devtoolkit.pro.actions.SearchRestfulEndpointsEverywhereAction"
                text="Search Restful Endpoints"
                description="Open Search Everywhere with Restful Endpoints tab">
            <keyboard-shortcut keymap="$default" first-keystroke="control alt R"/>
            <keyboard-shortcut keymap="Mac OS X" first-keystroke="meta alt R"/>
            <keyboard-shortcut keymap="Mac OS X 10.5+" first-keystroke="meta alt R"/>
            <!-- Command + \ shortcut for Mac -->
            <keyboard-shortcut keymap="Mac OS X" first-keystroke="meta BACK_SLASH"/>
            <keyboard-shortcut keymap="Mac OS X 10.5+" first-keystroke="meta BACK_SLASH"/>
        </action>

        <!-- Copy Git Link Action -->
        <action id="DevToolkitPro.CopyGitLink"
                class="com.devtoolkit.pro.actions.CopyGitLinkAction"
                text="Copy Git Link"
                description="Copy Git link for current line">
        </action>

        <!-- Open Git Link Action -->
        <action id="DevToolkitPro.OpenGitLink"
                class="com.devtoolkit.pro.actions.OpenGitLinkAction"
                text="Open Git Link"
                description="Open Git link in browser for current line">
        </action>

        <!-- Add action to Tools menu -->
        <group id="DevToolkitPro.ToolsMenu" text="Dev Toolkit Pro" description="Dev Toolkit Pro actions">
            <add-to-group group-id="ToolsMenu" anchor="first"/>
            <reference ref="DevToolkitPro.SearchRestfulUrls"/>
            <reference ref="DevToolkitPro.SearchRestfulEndpointsEverywhere"/>
        </group>

        <!-- Add Git link actions to editor context menu -->
        <group id="DevToolkitPro.EditorContextMenu" text="Dev Toolkit Pro">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <reference ref="DevToolkitPro.CopyGitLink"/>
            <reference ref="DevToolkitPro.OpenGitLink"/>
        </group>
    </actions>
</idea-plugin>